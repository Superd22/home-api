{"ast":null,"code":"import { __assign, __awaiter, __generator } from \"tslib\";\nimport { invariant } from \"../utilities/globals/index.js\";\nimport { visit, BREAK } from 'graphql';\nimport { argumentsObjectFromField, buildQueryFromSelectionSet, createFragmentMap, getFragmentDefinitions, getMainDefinition, hasDirectives, isField, isInlineFragment, mergeDeep, mergeDeepArray, removeClientSetsFromDocument, resultKeyNameFromField, shouldInclude } from \"../utilities/index.js\";\nimport { cacheSlot } from \"../cache/index.js\";\nvar LocalState = function () {\n  function LocalState(_a) {\n    var cache = _a.cache,\n      client = _a.client,\n      resolvers = _a.resolvers,\n      fragmentMatcher = _a.fragmentMatcher;\n    this.cache = cache;\n    if (client) {\n      this.client = client;\n    }\n    if (resolvers) {\n      this.addResolvers(resolvers);\n    }\n    if (fragmentMatcher) {\n      this.setFragmentMatcher(fragmentMatcher);\n    }\n  }\n  LocalState.prototype.addResolvers = function (resolvers) {\n    var _this = this;\n    this.resolvers = this.resolvers || {};\n    if (Array.isArray(resolvers)) {\n      resolvers.forEach(function (resolverGroup) {\n        _this.resolvers = mergeDeep(_this.resolvers, resolverGroup);\n      });\n    } else {\n      this.resolvers = mergeDeep(this.resolvers, resolvers);\n    }\n  };\n  LocalState.prototype.setResolvers = function (resolvers) {\n    this.resolvers = {};\n    this.addResolvers(resolvers);\n  };\n  LocalState.prototype.getResolvers = function () {\n    return this.resolvers || {};\n  };\n  LocalState.prototype.runResolvers = function (_a) {\n    var document = _a.document,\n      remoteResult = _a.remoteResult,\n      context = _a.context,\n      variables = _a.variables,\n      _b = _a.onlyRunForcedResolvers,\n      onlyRunForcedResolvers = _b === void 0 ? false : _b;\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_c) {\n        if (document) {\n          return [2, this.resolveDocument(document, remoteResult.data, context, variables, this.fragmentMatcher, onlyRunForcedResolvers).then(function (localResult) {\n            return __assign(__assign({}, remoteResult), {\n              data: localResult.result\n            });\n          })];\n        }\n        return [2, remoteResult];\n      });\n    });\n  };\n  LocalState.prototype.setFragmentMatcher = function (fragmentMatcher) {\n    this.fragmentMatcher = fragmentMatcher;\n  };\n  LocalState.prototype.getFragmentMatcher = function () {\n    return this.fragmentMatcher;\n  };\n  LocalState.prototype.clientQuery = function (document) {\n    if (hasDirectives(['client'], document)) {\n      if (this.resolvers) {\n        return document;\n      }\n    }\n    return null;\n  };\n  LocalState.prototype.serverQuery = function (document) {\n    return removeClientSetsFromDocument(document);\n  };\n  LocalState.prototype.prepareContext = function (context) {\n    var cache = this.cache;\n    return __assign(__assign({}, context), {\n      cache: cache,\n      getCacheKey: function (obj) {\n        return cache.identify(obj);\n      }\n    });\n  };\n  LocalState.prototype.addExportedVariables = function (document, variables, context) {\n    if (variables === void 0) {\n      variables = {};\n    }\n    if (context === void 0) {\n      context = {};\n    }\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        if (document) {\n          return [2, this.resolveDocument(document, this.buildRootValueFromCache(document, variables) || {}, this.prepareContext(context), variables).then(function (data) {\n            return __assign(__assign({}, variables), data.exportedVariables);\n          })];\n        }\n        return [2, __assign({}, variables)];\n      });\n    });\n  };\n  LocalState.prototype.shouldForceResolvers = function (document) {\n    var forceResolvers = false;\n    visit(document, {\n      Directive: {\n        enter: function (node) {\n          if (node.name.value === 'client' && node.arguments) {\n            forceResolvers = node.arguments.some(function (arg) {\n              return arg.name.value === 'always' && arg.value.kind === 'BooleanValue' && arg.value.value === true;\n            });\n            if (forceResolvers) {\n              return BREAK;\n            }\n          }\n        }\n      }\n    });\n    return forceResolvers;\n  };\n  LocalState.prototype.buildRootValueFromCache = function (document, variables) {\n    return this.cache.diff({\n      query: buildQueryFromSelectionSet(document),\n      variables: variables,\n      returnPartialData: true,\n      optimistic: false\n    }).result;\n  };\n  LocalState.prototype.resolveDocument = function (document, rootValue, context, variables, fragmentMatcher, onlyRunForcedResolvers) {\n    if (context === void 0) {\n      context = {};\n    }\n    if (variables === void 0) {\n      variables = {};\n    }\n    if (fragmentMatcher === void 0) {\n      fragmentMatcher = function () {\n        return true;\n      };\n    }\n    if (onlyRunForcedResolvers === void 0) {\n      onlyRunForcedResolvers = false;\n    }\n    return __awaiter(this, void 0, void 0, function () {\n      var mainDefinition, fragments, fragmentMap, definitionOperation, defaultOperationType, _a, cache, client, execContext;\n      return __generator(this, function (_b) {\n        mainDefinition = getMainDefinition(document);\n        fragments = getFragmentDefinitions(document);\n        fragmentMap = createFragmentMap(fragments);\n        definitionOperation = mainDefinition.operation;\n        defaultOperationType = definitionOperation ? definitionOperation.charAt(0).toUpperCase() + definitionOperation.slice(1) : 'Query';\n        _a = this, cache = _a.cache, client = _a.client;\n        execContext = {\n          fragmentMap: fragmentMap,\n          context: __assign(__assign({}, context), {\n            cache: cache,\n            client: client\n          }),\n          variables: variables,\n          fragmentMatcher: fragmentMatcher,\n          defaultOperationType: defaultOperationType,\n          exportedVariables: {},\n          onlyRunForcedResolvers: onlyRunForcedResolvers\n        };\n        return [2, this.resolveSelectionSet(mainDefinition.selectionSet, rootValue, execContext).then(function (result) {\n          return {\n            result: result,\n            exportedVariables: execContext.exportedVariables\n          };\n        })];\n      });\n    });\n  };\n  LocalState.prototype.resolveSelectionSet = function (selectionSet, rootValue, execContext) {\n    return __awaiter(this, void 0, void 0, function () {\n      var fragmentMap, context, variables, resultsToMerge, execute;\n      var _this = this;\n      return __generator(this, function (_a) {\n        fragmentMap = execContext.fragmentMap, context = execContext.context, variables = execContext.variables;\n        resultsToMerge = [rootValue];\n        execute = function (selection) {\n          return __awaiter(_this, void 0, void 0, function () {\n            var fragment, typeCondition;\n            return __generator(this, function (_a) {\n              if (!shouldInclude(selection, variables)) {\n                return [2];\n              }\n              if (isField(selection)) {\n                return [2, this.resolveField(selection, rootValue, execContext).then(function (fieldResult) {\n                  var _a;\n                  if (typeof fieldResult !== 'undefined') {\n                    resultsToMerge.push((_a = {}, _a[resultKeyNameFromField(selection)] = fieldResult, _a));\n                  }\n                })];\n              }\n              if (isInlineFragment(selection)) {\n                fragment = selection;\n              } else {\n                fragment = fragmentMap[selection.name.value];\n                __DEV__ ? invariant(fragment, \"No fragment named \".concat(selection.name.value)) : invariant(fragment, 11);\n              }\n              if (fragment && fragment.typeCondition) {\n                typeCondition = fragment.typeCondition.name.value;\n                if (execContext.fragmentMatcher(rootValue, typeCondition, context)) {\n                  return [2, this.resolveSelectionSet(fragment.selectionSet, rootValue, execContext).then(function (fragmentResult) {\n                    resultsToMerge.push(fragmentResult);\n                  })];\n                }\n              }\n              return [2];\n            });\n          });\n        };\n        return [2, Promise.all(selectionSet.selections.map(execute)).then(function () {\n          return mergeDeepArray(resultsToMerge);\n        })];\n      });\n    });\n  };\n  LocalState.prototype.resolveField = function (field, rootValue, execContext) {\n    return __awaiter(this, void 0, void 0, function () {\n      var variables, fieldName, aliasedFieldName, aliasUsed, defaultResult, resultPromise, resolverType, resolverMap, resolve;\n      var _this = this;\n      return __generator(this, function (_a) {\n        variables = execContext.variables;\n        fieldName = field.name.value;\n        aliasedFieldName = resultKeyNameFromField(field);\n        aliasUsed = fieldName !== aliasedFieldName;\n        defaultResult = rootValue[aliasedFieldName] || rootValue[fieldName];\n        resultPromise = Promise.resolve(defaultResult);\n        if (!execContext.onlyRunForcedResolvers || this.shouldForceResolvers(field)) {\n          resolverType = rootValue.__typename || execContext.defaultOperationType;\n          resolverMap = this.resolvers && this.resolvers[resolverType];\n          if (resolverMap) {\n            resolve = resolverMap[aliasUsed ? fieldName : aliasedFieldName];\n            if (resolve) {\n              resultPromise = Promise.resolve(cacheSlot.withValue(this.cache, resolve, [rootValue, argumentsObjectFromField(field, variables), execContext.context, {\n                field: field,\n                fragmentMap: execContext.fragmentMap\n              }]));\n            }\n          }\n        }\n        return [2, resultPromise.then(function (result) {\n          if (result === void 0) {\n            result = defaultResult;\n          }\n          if (field.directives) {\n            field.directives.forEach(function (directive) {\n              if (directive.name.value === 'export' && directive.arguments) {\n                directive.arguments.forEach(function (arg) {\n                  if (arg.name.value === 'as' && arg.value.kind === 'StringValue') {\n                    execContext.exportedVariables[arg.value.value] = result;\n                  }\n                });\n              }\n            });\n          }\n          if (!field.selectionSet) {\n            return result;\n          }\n          if (result == null) {\n            return result;\n          }\n          if (Array.isArray(result)) {\n            return _this.resolveSubSelectedArray(field, result, execContext);\n          }\n          if (field.selectionSet) {\n            return _this.resolveSelectionSet(field.selectionSet, result, execContext);\n          }\n        })];\n      });\n    });\n  };\n  LocalState.prototype.resolveSubSelectedArray = function (field, result, execContext) {\n    var _this = this;\n    return Promise.all(result.map(function (item) {\n      if (item === null) {\n        return null;\n      }\n      if (Array.isArray(item)) {\n        return _this.resolveSubSelectedArray(field, item, execContext);\n      }\n      if (field.selectionSet) {\n        return _this.resolveSelectionSet(field.selectionSet, item, execContext);\n      }\n    }));\n  };\n  return LocalState;\n}();\nexport { LocalState };","map":{"version":3,"names":["__assign","__awaiter","__generator","invariant","visit","BREAK","argumentsObjectFromField","buildQueryFromSelectionSet","createFragmentMap","getFragmentDefinitions","getMainDefinition","hasDirectives","isField","isInlineFragment","mergeDeep","mergeDeepArray","removeClientSetsFromDocument","resultKeyNameFromField","shouldInclude","cacheSlot","LocalState","_a","cache","client","resolvers","fragmentMatcher","addResolvers","setFragmentMatcher","prototype","_this","Array","isArray","forEach","resolverGroup","setResolvers","getResolvers","runResolvers","document","remoteResult","context","variables","_b","onlyRunForcedResolvers","_c","resolveDocument","data","then","localResult","result","getFragmentMatcher","clientQuery","serverQuery","prepareContext","getCacheKey","obj","identify","addExportedVariables","buildRootValueFromCache","exportedVariables","shouldForceResolvers","forceResolvers","Directive","enter","node","name","value","arguments","some","arg","kind","diff","query","returnPartialData","optimistic","rootValue","mainDefinition","fragments","fragmentMap","definitionOperation","defaultOperationType","execContext","operation","charAt","toUpperCase","slice","resolveSelectionSet","selectionSet","resultsToMerge","execute","selection","fragment","typeCondition","resolveField","fieldResult","push","__DEV__","concat","fragmentResult","Promise","all","selections","map","field","fieldName","aliasedFieldName","aliasUsed","defaultResult","resultPromise","resolverType","resolverMap","resolve","__typename","withValue","directives","directive","resolveSubSelectedArray","item"],"sources":["/home/david/perso/home-api/node_modules/@apollo/client/core/LocalState.js"],"sourcesContent":["import { __assign, __awaiter, __generator } from \"tslib\";\nimport { invariant } from \"../utilities/globals/index.js\";\nimport { visit, BREAK, } from 'graphql';\nimport { argumentsObjectFromField, buildQueryFromSelectionSet, createFragmentMap, getFragmentDefinitions, getMainDefinition, hasDirectives, isField, isInlineFragment, mergeDeep, mergeDeepArray, removeClientSetsFromDocument, resultKeyNameFromField, shouldInclude, } from \"../utilities/index.js\";\nimport { cacheSlot } from \"../cache/index.js\";\nvar LocalState = (function () {\n    function LocalState(_a) {\n        var cache = _a.cache, client = _a.client, resolvers = _a.resolvers, fragmentMatcher = _a.fragmentMatcher;\n        this.cache = cache;\n        if (client) {\n            this.client = client;\n        }\n        if (resolvers) {\n            this.addResolvers(resolvers);\n        }\n        if (fragmentMatcher) {\n            this.setFragmentMatcher(fragmentMatcher);\n        }\n    }\n    LocalState.prototype.addResolvers = function (resolvers) {\n        var _this = this;\n        this.resolvers = this.resolvers || {};\n        if (Array.isArray(resolvers)) {\n            resolvers.forEach(function (resolverGroup) {\n                _this.resolvers = mergeDeep(_this.resolvers, resolverGroup);\n            });\n        }\n        else {\n            this.resolvers = mergeDeep(this.resolvers, resolvers);\n        }\n    };\n    LocalState.prototype.setResolvers = function (resolvers) {\n        this.resolvers = {};\n        this.addResolvers(resolvers);\n    };\n    LocalState.prototype.getResolvers = function () {\n        return this.resolvers || {};\n    };\n    LocalState.prototype.runResolvers = function (_a) {\n        var document = _a.document, remoteResult = _a.remoteResult, context = _a.context, variables = _a.variables, _b = _a.onlyRunForcedResolvers, onlyRunForcedResolvers = _b === void 0 ? false : _b;\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_c) {\n                if (document) {\n                    return [2, this.resolveDocument(document, remoteResult.data, context, variables, this.fragmentMatcher, onlyRunForcedResolvers).then(function (localResult) { return (__assign(__assign({}, remoteResult), { data: localResult.result })); })];\n                }\n                return [2, remoteResult];\n            });\n        });\n    };\n    LocalState.prototype.setFragmentMatcher = function (fragmentMatcher) {\n        this.fragmentMatcher = fragmentMatcher;\n    };\n    LocalState.prototype.getFragmentMatcher = function () {\n        return this.fragmentMatcher;\n    };\n    LocalState.prototype.clientQuery = function (document) {\n        if (hasDirectives(['client'], document)) {\n            if (this.resolvers) {\n                return document;\n            }\n        }\n        return null;\n    };\n    LocalState.prototype.serverQuery = function (document) {\n        return removeClientSetsFromDocument(document);\n    };\n    LocalState.prototype.prepareContext = function (context) {\n        var cache = this.cache;\n        return __assign(__assign({}, context), { cache: cache, getCacheKey: function (obj) {\n                return cache.identify(obj);\n            } });\n    };\n    LocalState.prototype.addExportedVariables = function (document, variables, context) {\n        if (variables === void 0) { variables = {}; }\n        if (context === void 0) { context = {}; }\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                if (document) {\n                    return [2, this.resolveDocument(document, this.buildRootValueFromCache(document, variables) || {}, this.prepareContext(context), variables).then(function (data) { return (__assign(__assign({}, variables), data.exportedVariables)); })];\n                }\n                return [2, __assign({}, variables)];\n            });\n        });\n    };\n    LocalState.prototype.shouldForceResolvers = function (document) {\n        var forceResolvers = false;\n        visit(document, {\n            Directive: {\n                enter: function (node) {\n                    if (node.name.value === 'client' && node.arguments) {\n                        forceResolvers = node.arguments.some(function (arg) {\n                            return arg.name.value === 'always' &&\n                                arg.value.kind === 'BooleanValue' &&\n                                arg.value.value === true;\n                        });\n                        if (forceResolvers) {\n                            return BREAK;\n                        }\n                    }\n                },\n            },\n        });\n        return forceResolvers;\n    };\n    LocalState.prototype.buildRootValueFromCache = function (document, variables) {\n        return this.cache.diff({\n            query: buildQueryFromSelectionSet(document),\n            variables: variables,\n            returnPartialData: true,\n            optimistic: false,\n        }).result;\n    };\n    LocalState.prototype.resolveDocument = function (document, rootValue, context, variables, fragmentMatcher, onlyRunForcedResolvers) {\n        if (context === void 0) { context = {}; }\n        if (variables === void 0) { variables = {}; }\n        if (fragmentMatcher === void 0) { fragmentMatcher = function () { return true; }; }\n        if (onlyRunForcedResolvers === void 0) { onlyRunForcedResolvers = false; }\n        return __awaiter(this, void 0, void 0, function () {\n            var mainDefinition, fragments, fragmentMap, definitionOperation, defaultOperationType, _a, cache, client, execContext;\n            return __generator(this, function (_b) {\n                mainDefinition = getMainDefinition(document);\n                fragments = getFragmentDefinitions(document);\n                fragmentMap = createFragmentMap(fragments);\n                definitionOperation = mainDefinition\n                    .operation;\n                defaultOperationType = definitionOperation\n                    ? definitionOperation.charAt(0).toUpperCase() +\n                        definitionOperation.slice(1)\n                    : 'Query';\n                _a = this, cache = _a.cache, client = _a.client;\n                execContext = {\n                    fragmentMap: fragmentMap,\n                    context: __assign(__assign({}, context), { cache: cache, client: client }),\n                    variables: variables,\n                    fragmentMatcher: fragmentMatcher,\n                    defaultOperationType: defaultOperationType,\n                    exportedVariables: {},\n                    onlyRunForcedResolvers: onlyRunForcedResolvers,\n                };\n                return [2, this.resolveSelectionSet(mainDefinition.selectionSet, rootValue, execContext).then(function (result) { return ({\n                        result: result,\n                        exportedVariables: execContext.exportedVariables,\n                    }); })];\n            });\n        });\n    };\n    LocalState.prototype.resolveSelectionSet = function (selectionSet, rootValue, execContext) {\n        return __awaiter(this, void 0, void 0, function () {\n            var fragmentMap, context, variables, resultsToMerge, execute;\n            var _this = this;\n            return __generator(this, function (_a) {\n                fragmentMap = execContext.fragmentMap, context = execContext.context, variables = execContext.variables;\n                resultsToMerge = [rootValue];\n                execute = function (selection) { return __awaiter(_this, void 0, void 0, function () {\n                    var fragment, typeCondition;\n                    return __generator(this, function (_a) {\n                        if (!shouldInclude(selection, variables)) {\n                            return [2];\n                        }\n                        if (isField(selection)) {\n                            return [2, this.resolveField(selection, rootValue, execContext).then(function (fieldResult) {\n                                    var _a;\n                                    if (typeof fieldResult !== 'undefined') {\n                                        resultsToMerge.push((_a = {},\n                                            _a[resultKeyNameFromField(selection)] = fieldResult,\n                                            _a));\n                                    }\n                                })];\n                        }\n                        if (isInlineFragment(selection)) {\n                            fragment = selection;\n                        }\n                        else {\n                            fragment = fragmentMap[selection.name.value];\n                            __DEV__ ? invariant(fragment, \"No fragment named \".concat(selection.name.value)) : invariant(fragment, 11);\n                        }\n                        if (fragment && fragment.typeCondition) {\n                            typeCondition = fragment.typeCondition.name.value;\n                            if (execContext.fragmentMatcher(rootValue, typeCondition, context)) {\n                                return [2, this.resolveSelectionSet(fragment.selectionSet, rootValue, execContext).then(function (fragmentResult) {\n                                        resultsToMerge.push(fragmentResult);\n                                    })];\n                            }\n                        }\n                        return [2];\n                    });\n                }); };\n                return [2, Promise.all(selectionSet.selections.map(execute)).then(function () {\n                        return mergeDeepArray(resultsToMerge);\n                    })];\n            });\n        });\n    };\n    LocalState.prototype.resolveField = function (field, rootValue, execContext) {\n        return __awaiter(this, void 0, void 0, function () {\n            var variables, fieldName, aliasedFieldName, aliasUsed, defaultResult, resultPromise, resolverType, resolverMap, resolve;\n            var _this = this;\n            return __generator(this, function (_a) {\n                variables = execContext.variables;\n                fieldName = field.name.value;\n                aliasedFieldName = resultKeyNameFromField(field);\n                aliasUsed = fieldName !== aliasedFieldName;\n                defaultResult = rootValue[aliasedFieldName] || rootValue[fieldName];\n                resultPromise = Promise.resolve(defaultResult);\n                if (!execContext.onlyRunForcedResolvers ||\n                    this.shouldForceResolvers(field)) {\n                    resolverType = rootValue.__typename || execContext.defaultOperationType;\n                    resolverMap = this.resolvers && this.resolvers[resolverType];\n                    if (resolverMap) {\n                        resolve = resolverMap[aliasUsed ? fieldName : aliasedFieldName];\n                        if (resolve) {\n                            resultPromise = Promise.resolve(cacheSlot.withValue(this.cache, resolve, [\n                                rootValue,\n                                argumentsObjectFromField(field, variables),\n                                execContext.context,\n                                { field: field, fragmentMap: execContext.fragmentMap },\n                            ]));\n                        }\n                    }\n                }\n                return [2, resultPromise.then(function (result) {\n                        if (result === void 0) { result = defaultResult; }\n                        if (field.directives) {\n                            field.directives.forEach(function (directive) {\n                                if (directive.name.value === 'export' && directive.arguments) {\n                                    directive.arguments.forEach(function (arg) {\n                                        if (arg.name.value === 'as' && arg.value.kind === 'StringValue') {\n                                            execContext.exportedVariables[arg.value.value] = result;\n                                        }\n                                    });\n                                }\n                            });\n                        }\n                        if (!field.selectionSet) {\n                            return result;\n                        }\n                        if (result == null) {\n                            return result;\n                        }\n                        if (Array.isArray(result)) {\n                            return _this.resolveSubSelectedArray(field, result, execContext);\n                        }\n                        if (field.selectionSet) {\n                            return _this.resolveSelectionSet(field.selectionSet, result, execContext);\n                        }\n                    })];\n            });\n        });\n    };\n    LocalState.prototype.resolveSubSelectedArray = function (field, result, execContext) {\n        var _this = this;\n        return Promise.all(result.map(function (item) {\n            if (item === null) {\n                return null;\n            }\n            if (Array.isArray(item)) {\n                return _this.resolveSubSelectedArray(field, item, execContext);\n            }\n            if (field.selectionSet) {\n                return _this.resolveSelectionSet(field.selectionSet, item, execContext);\n            }\n        }));\n    };\n    return LocalState;\n}());\nexport { LocalState };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}